<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bulletin de Paie Clone</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.25/jspdf.plugin.autotable.min.js" defer></script>
    <style>
        body { font-family: Arial; margin: 20px; }
        button { 
            padding: 10px 15px; 
            background: #0066cc; 
            color: white; 
            border: none; 
            cursor: pointer;
            font-size: 16px;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <button onclick="genererPDF()">Générer la fiche de paie</button>

    <script>
        window.onload = function () {
            const { jsPDF } = window.jspdf;

            window.genererPDF = function () {
                const doc = new jsPDF();
                const periode = "Période : 10/2023";

                doc.setFontSize(14);
                doc.text("BULLETIN DE SALAIRE", 105, 10, { align: 'center' });
                doc.setFontSize(10);
                doc.text(periode, 105, 16, { align: 'center' });

                // Infos entreprise et salarié côte à côte
                doc.setFontSize(10);
                doc.setFont(undefined, 'bold');
                doc.text("Entreprise :", 15, 25);
                doc.text("Salarié :", 115, 25);
                doc.setFont(undefined, 'normal');

                const infosEntreprise = [
                    "SOCIETE RUE ANONYME",
                    "4 RUE DE LA PAIX",
                    "70015 PARIS",
                    "Siret : 1234567890002",
                    "Téléphone : 01 23 45 67 89"
                ];

                const infosSalarie = [
                    "Monsieur JEROME DUBOIS",
                    "4 rue de la paix",
                    "70015 Paris",
                    "Email : jerome.dubois@email.com",
                    "Téléphone : 06 12 34 56 78",
                    "N° SS : 2 2800000000000"
                ];

                infosEntreprise.forEach((line, index) => {
                    doc.text(line, 15, 30 + index * 5);
                });

                infosSalarie.forEach((line, index) => {
                    doc.text(line, 115, 30 + index * 5);
                });

                doc.autoTable({
                    startY: 65,
                    head: [["Éléments de paie", "Base", "Taux", "A déduire", "A payer", "Charges patronales"]],
                    body: [
                        ["Salaire de base", "151.67", "17.3939", "", "2 638.13", ""],
                        ["Prime d'ancienneté", "", "", "", "140.85", ""],
                        ["Salaire brut", "", "", "", "4 778.98", ""],
                        ["Santé", "", "", "", "", ""],
                        ["Sécurité Sociale - Mal. Mat. Inval. Décès", "2 778.98", "0.4140", "11.50", "", "7.0000 | 194.53"],
                        ["Complémentaire - Incap. Inval. Décès", "2 778.98", "0.4860", "13.51", "", ""],
                        ["Complémentaire - Santé", "3 428.00", "3.1550", "108.15", "", "3.1550 | 108.15"],
                        ["Accidents du travail & mal. professionnelles", "2 778.98", "0.9000", "", "", "25.01"],
                        ["Retraite", "", "", "", "", ""],
                        ["Sécurité Sociale plafonnée", "2 778.98", "6.9000", "191.75", "", "8.5500 | 237.60"],
                        ["Sécurité Sociale déplafonnée", "2 778.98", "0.4000", "11.12", "", "1.9000 | 52.80"],
                        ["Complémentaire Tranche 1", "2 778.98", "4.0100", "111.44", "", "6.0100 | 167.02"],
                        ["Famille", "2 778.98", "", "", "", "3.4500 | 95.87"],
                        ["Assurance chômage", "2 778.98", "", "", "", "4.2000 | 116.72"],
                        ["Autres contributions dues par l'employeur", "2 778.98", "", "", "", "4.4060 | 122.45"],
                        ["Autres contributions dues par l'employeur", "121.66", "8.0000", "", "", "9.73"],
                        ["CSG déduct. de l'impôt sur le revenu", "2 852.01", "6.8000", "193.94", "", ""],
                        ["CSG/CRDS non déduct. de l'impôt sur le revenu", "2 852.01", "2.9000", "82.71", "", ""],
                        ["Total des cotisations et contributions", "", "", "710.61", "", "1 143.39"],
                        ["Titres-restaurant", "22.00", "3.6000", "79.20", "", "5.4000 | 118.80"],
                        ["Forfait Télétravail", "", "", "", "7.00", ""],
                        ["Forfait mensuel NAVIGO Zones 4 - 5", "65.20", "50.0000", "", "32.60", ""],
                        ["Réintégration fiscale", "108.15", "", "", "", ""],
                        ["Net à payer avant impôt sur le revenu", "", "", "", "2 028.77", ""],
                        ["Impôt sur le revenu prélevé à la source - PAS", "2 259.23", "0.0000", "0.00", "", ""]
                    ],
                    margin: { left: 15 },
                    styles: { fontSize: 7, cellPadding: 2, overflow: 'linebreak' },
                    headStyles: { fillColor: [33, 64, 154], textColor: [255, 255, 255] },
                    columnStyles: {
                        0: { cellWidth: 55 },
                        1: { cellWidth: 20 },
                        2: { cellWidth: 20 },
                        3: { cellWidth: 20 },
                        4: { cellWidth: 20 },
                        5: { cellWidth: 30 }
                    }
                });

                doc.autoTable({
                    startY: doc.lastAutoTable.finalY + 10,
                    head: [["Heures", "Heures suppl.", "Brut", "Plafond S.S.", "Net imposable", "Ch. patronales", "Coût Global", "Total versé", "Allégements"]],
                    body: [[
                        "Mensuel", "151.67", "2 778.98", "3 428.00", "2 259.23", "1 262.19", "4 080.77", "3 922.37", "216.76"
                    ], [
                        "Annuel", "1 213.36", "23 894.56", "27 424.00", "19 430.05", "10 603.69", "34 827.05", "33 655.85", "1 863.77"
                    ]],
                    margin: { left: 15 },
                    styles: { fontSize: 7, cellPadding: 2, overflow: 'linebreak' },
                    headStyles: { fillColor: [33, 64, 154], textColor: [255, 255, 255] }
                });

                doc.setFontSize(8);
                doc.text("Modèle réalisé sur 1entreprise.com", 105, doc.internal.pageSize.height - 10, { align: 'center' });

                doc.save("bulletin_paie_clone.pdf");
            };
        };
    </script>
</body>
</html>
