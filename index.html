<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Générateur de Fiche de Paie</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.25/jspdf.plugin.autotable.min.js"></script>
    <style>
        body { font-family: Arial; margin: 20px; }
        button { 
            padding: 10px 15px; 
            background: #0066cc; 
            color: white; 
            border: none; 
            cursor: pointer;
            font-size: 16px;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <button onclick="genererPDF()">Générer la fiche de paie</button>

    <script>
        const { jsPDF } = window.jspdf;
        
        function genererPDF() {
            const doc = new jsPDF();
            
            // Configuration
            doc.setProperties({
                title: 'Fiche de paie',
                subject: 'Bulletin de salaire',
                author: 'SOCIETE RUE ANONYME',
                keywords: 'paie, salaire, bulletin',
                creator: 'FichePay Generator'
            });
            
            // En-tête
            doc.setFontSize(16);
            doc.setTextColor(0, 0, 0);
            doc.text("SOCIETE RUE ANONYME", 105, 15, { align: 'center' });
            
            doc.setFontSize(10);
            doc.text("4 RUE DE LA PAIX", 105, 20, { align: 'center' });
            doc.text("70015 PARIS", 105, 25, { align: 'center' });
            
            // Informations entreprise
            doc.text("Siret : 1234567890002", 20, 35);
            doc.text("Code Naf : 00002", 20, 40);
            doc.text("Ursa/MSa : 12700000124563979", 20, 45);
            doc.text("Matricule : 00001", 20, 50);
            doc.text("N° S5 : 289000000000", 20, 55);
            doc.text("Iban / Rib : FR76 XXXX XXXX XXX", 20, 60);
            
            doc.text("Emploi : non cadre", 120, 35);
            doc.text("Statut professionnel : Employé", 120, 40);
            doc.text("Niveau : XX", 120, 45);
            doc.text("Coefficient : xxx", 120, 50);
            doc.text("Entrée : 01/01/2018", 120, 55);
            doc.text("Ancienneté : ", 120, 60);
            doc.text("Convention collective : xxxxxxxxxxxxx", 120, 65);
            
            // Ligne de séparation
            doc.line(20, 70, 190, 70);
            
            // Informations salarié
            doc.setFontSize(12);
            doc.text("Monsieur JEROME DUBOIS", 20, 80);
            doc.setFontSize(10);
            doc.text("4 rue de la paix", 20, 85);
            doc.text("70015 Paris", 20, 90);
            
            // Tableau éléments de paie
            doc.setFontSize(12);
            doc.text("ÉLÉMENTS DE PAIE", 20, 100);
            
            doc.autoTable({
                startY: 105,
                head: [['Éléments de paie', 'Base', 'Taux', 'A déduire', 'A payer', 'Charges patronales']],
                body: [
                    ['Salaire de base', '151.67', '17.3939', '', '2 638.13', ''],
                    ['Prime d\'ancienneté', '', '', '', '140.85', ''],
                    ['Salaire brut', '', '', '', '4 778.98', ''],
                    ['Santé', '', '', '', '', ''],
                    ['Sécurité Sociale - Mal. Mat. Inval. Déclés', '2 778.98', '0.4140', '11.50', '2 778.98', '7.0000 | 194.53'],
                    ['Complémentaire - Incap. Inval. Déclés', '3 428.00', '3.1550', '108.15', '2 778.98', '0.4860 | 13.51'],
                    ['Complémentaire - Santé', '', '', '', '3 428.00', '3.1550 | 108.15'],
                    ['Accidents du travail & mal. professionnelles', '', '', '', '2 778.98', '0.9000 | 25.01'],
                    ['Retraits', '', '', '', '', ''],
                    ['Sécurité Sociale plafonnée', '2 778.98', '6.9000', '191.75', '2 778.98', '8.5500 | 237.60'],
                    ['Sécurité Sociale déplafonnée', '2 778.98', '0.4000', '11.12', '2 778.98', '1.9000 | 52.80'],
                    ['Complémentaire Tranche 1', '2 778.98', '4.0100', '111.44', '2 778.98', '6.0100 | 167.02'],
                    ['Famille', '', '', '', '2 778.98', '3.4500 | 95.87'],
                    ['Assurance chômage', '', '', '', '2 778.98', '4.2000 | 116.72'],
                    ['Autres contributions dues par l\'employeur', '', '', '', '', ''],
                    ['Autres contributions dues par l\'employeur', '', '', '', '2 778.98', '4.4060 | 122.45'],
                    ['Autres contributions dues par l\'employeur', '', '', '', '121.66', '8.0000 | 9.73'],
                    ['CSG déduct. de l\'impôt sur le revenu', '2 852.01', '6.8000', '193.94', '', ''],
                    ['CSG/CRDS non déduct. de l\'impôt sur le revenu', '2 852.01', '2.9000', '82.71', '', ''],
                    ['Total des cotisations et contributions', '', '', '', '710.61', '1 143.39'],
                    ['Titres-restaurant', '22.00', '3.6000', '79.20', '', '22.00 | 5.4000 | 118.80'],
                    ['Forfait Télétravail', '', '', '', '7.00', ''],
                    ['Forfait mensuel NAVIGO Zones 4 - 5', '65.20', '50.0000', '', '32.60', ''],
                    ['Réintégration fiscale', '108.15', '', '', '', ''],
                    ['Net à payer avant impôt sur le revenu', '', '', '', '2 028.77', ''],
                    ['dont évolution de la rémunération liée à la suppression des cotisations chômage et maladie', '39.06', '', '', '', ''],
                    ['Impôt sur le revenu prélevé à la source - PAS', '2 259.23', '0.0000', '0.00', '', ''],
                    ['Taux personnalisé', '', '', '', '', '2 028.77']
                ],
                margin: { left: 20 },
                styles: { 
                    fontSize: 7, 
                    cellPadding: 2,
                    overflow: 'linebreak'
                },
                headStyles: { 
                    fillColor: [220, 220, 220],
                    textColor: [0, 0, 0],
                    fontStyle: 'bold'
                },
                columnStyles: {
                    0: { cellWidth: 60 },
                    1: { cellWidth: 20 },
                    2: { cellWidth: 20 },
                    3: { cellWidth: 20 },
                    4: { cellWidth: 20 },
                    5: { cellWidth: 30 }
                },
                didParseCell: function(data) {
                    if (data.section === 'body' && data.row.index === 3) {
                        data.cell.styles.fontStyle = 'bold';
                    }
                    if (data.section === 'body' && data.row.index === 2) {
                        data.cell.styles.fontStyle = 'bold';
                    }
                }
            });
            
            // Récapitulatif
            doc.setFontSize(12);
            doc.text("RÉCAPITULATIF", 20, doc.lastAutoTable.finalY + 10);
            
            doc.autoTable({
                startY: doc.lastAutoTable.finalY + 15,
                head: [['', 'Heures', 'Heures suppl.', 'Brut', 'Plafond S.S.', 'Net imposable', 'Ch. nationales', 'Coût Global', 'Total versé', 'Allègements']],
                body: [
                    ['Mensuel', '151.67', '', '2 778.98', '3 428.00', '2 259.23', '1 262.19', '4 080.77', '3 922.37', '216.76'],
                    ['Annuel', '1 213.36', '', '23 894.56', '27 424.00', '19 430.05', '10 603.69', '34 827.05', '33 655.85', '1 863.77']
                ],
                margin: { left: 20 },
                styles: { 
                    fontSize: 7, 
                    cellPadding: 2,
                    overflow: 'linebreak'
                },
                headStyles: { 
                    fillColor: [220, 220, 220],
                    textColor: [0, 0, 0],
                    fontStyle: 'bold'
                }
            });
            
            // Pied de page
            doc.setFontSize(8);
            doc.text("Modèle réalisé avec FichePay Generator", 105, 285, { align: 'center' });
            
            // Signature
            doc.text("Le salarié", 40, 270);
            doc.text("_________________________", 40, 275);
            
            doc.text("L'employeur", 140, 270);
            doc.text("_________________________", 140, 275);
            
            // Sauvegarde
            doc.save('fiche_paie_JEROME_DUBOIS.pdf');
        }
    </script>
</body>
</html>
