<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Générateur de Fiche de Paie</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.25/jspdf.plugin.autotable.min.js"></script>
    <style>
        body { font-family: Arial; margin: 20px; }
        button { 
            padding: 10px 15px; 
            background: #0066cc; 
            color: white; 
            border: none; 
            cursor: pointer;
            font-size: 16px;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <button onclick="genererPDF()">Générer la fiche de paie</button>

    <script>
        const { jsPDF } = window.jspdf;
        
        function genererPDF() {
            const doc = new jsPDF();
            
            // Configuration
            doc.setProperties({
                title: 'Fiche de paie',
                subject: 'Bulletin de salaire',
                author: 'SOCIETE RUE ANONYME',
                keywords: 'paie, salaire, bulletin',
                creator: 'FichePay Generator'
            });
            
            // En-tête
            doc.setFontSize(16);
            doc.setTextColor(0, 0, 0);
            doc.text("SOCIETE RUE ANONYME", 105, 15, { align: 'center' });
            
            doc.setFontSize(10);
            doc.text("4 RUE DE LA PAIX - 70015 PARIS", 105, 20, { align: 'center' });
            doc.text("Tél: 01 23 45 67 89 - Email: contact@entreprise.com", 105, 25, { align: 'center' });
            
            // Informations entreprise et salarié côte à côte
            doc.setFontSize(10);
            
            // Colonne Entreprise
            doc.text("Siret : 1234567890002", 20, 35);
            doc.text("Adresse : 4 RUE DE LA PAIX", 20, 40);
            doc.text("70015 PARIS", 20, 45);
            doc.text("Tél: 01 23 45 67 89", 20, 50);
            doc.text("Email: contact@entreprise.com", 20, 55);
            
            // Colonne Salarié
            doc.text("Nom : DUBOIS", 120, 35);
            doc.text("Prénom : Jérôme", 120, 40);
            doc.text("Adresse : 4 rue de la paix", 120, 45);
            doc.text("70015 PARIS", 120, 50);
            doc.text("N° Sécurité sociale : 1 23 45 67 891 234", 120, 55);
            doc.text("Email : j.dubois@email.com", 120, 60);
            
            // Ligne de séparation
            doc.line(20, 65, 190, 65);
            
            // Informations salarié
            doc.setFontSize(12);
            doc.text("Monsieur Jérôme DUBOIS", 20, 75);
            
            // Tableau éléments de paie (identique à l'exemple)
            doc.setFontSize(12);
            doc.text("ÉLÉMENTS DE PAIE", 20, 85);
            
            doc.autoTable({
                startY: 90,
                head: [['Éléments de paie', 'Base', 'Taux', 'A déduire', 'A payer', 'Charges patronales']],
                body: [
                    ['Salaire de base', '151.67', '17.3939', '', '2 638.13', ''],
                    ['Prime d\'ancienneté', '', '', '', '140.85', ''],
                    ['Salaire brut', '', '', '', '4 778.98', ''],
                    // ... (le reste du tableau identique à l'exemple)
                    ['Taux personnalisé', '', '', '', '', '2 028.77']
                ],
                margin: { left: 20 },
                styles: { 
                    fontSize: 7, 
                    cellPadding: 2,
                    overflow: 'linebreak'
                },
                headStyles: { 
                    fillColor: [220, 220, 220],
                    textColor: [0, 0, 0],
                    fontStyle: 'bold'
                },
                columnStyles: {
                    0: { cellWidth: 60 },
                    1: { cellWidth: 20 },
                    2: { cellWidth: 20 },
                    3: { cellWidth: 20 },
                    4: { cellWidth: 20 },
                    5: { cellWidth: 30 }
                }
            });
            
            // Récapitulatif (identique à l'exemple)
            doc.setFontSize(12);
            doc.text("RÉCAPITULATIF", 20, doc.lastAutoTable.finalY + 10);
            
            doc.autoTable({
                startY: doc.lastAutoTable.finalY + 15,
                head: [['', 'Heures', 'Heures suppl.', 'Brut', 'Plafond S.S.', 'Net imposable', 'Ch. nationales', 'Coût Global', 'Total versé', 'Allègements']],
                body: [
                    ['Mensuel', '151.67', '', '2 778.98', '3 428.00', '2 259.23', '1 262.19', '4 080.77', '3 922.37', '216.76'],
                    ['Annuel', '1 213.36', '', '23 894.56', '27 424.00', '19 430.05', '10 603.69', '34 827.05', '33 655.85', '1 863.77']
                ],
                margin: { left: 20 },
                styles: { 
                    fontSize: 7, 
                    cellPadding: 2,
                    overflow: 'linebreak'
                },
                headStyles: { 
                    fillColor: [220, 220, 220],
                    textColor: [0, 0, 0],
                    fontStyle: 'bold'
                }
            });
            
            // Pied de page
            doc.setFontSize(8);
            doc.text("Modèle réalisé avec FichePay Generator", 105, 285, { align: 'center' });
            
            // Signature
            doc.text("Le salarié", 40, 270);
            doc.text("_________________________", 40, 275);
            
            doc.text("L'employeur", 140, 270);
            doc.text("_________________________", 140, 275);
            
            // Sauvegarde
            doc.save('fiche_paie_JEROME_DUBOIS.pdf');
        }
    </script>
</body>
</html>
